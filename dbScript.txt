-- 4. Tạo bảng quiz (tham chiếu user và type)
CREATE TABLE quiz(
                     id INT PRIMARY KEY AUTO_INCREMENT,
                     name VARCHAR(255) NOT NULL,
                     description VARCHAR(255) NOT NULL,
                     created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                     updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                     user_id INT NOT NULL,
                     type_id INT NOT NULL,
                     answer JSON NOT NULL,
                     status BOOLEAN DEFAULT TRUE,
                     views INT NOT null DEFAULT 0,
                     FOREIGN KEY (user_id) REFERENCES users(id),
                     FOREIGN KEY (type_id) REFERENCES type(id)


);

-- 4.5. Tao bang quiz_tag
CREATE TABLE quiz_tag(
                          quiz_id INT NOT NULL,
                          tag_id INT NOT NULL,
                          FOREIGN KEY (quiz_id) REFERENCES quiz(id),
                          FOREIGN KEY (tag_id) REFERENCES tag(id),
                          PRIMARY KEY (quiz_id, tag_id)
);


-- 5. Quizzes
INSERT INTO quiz (name, description, user_id, type_id, views, answer) VALUES
                                                                   ('Algebra Basics', 'A quiz on fundamental algebra concepts', 1, 1, 0,
                                                                    JSON_ARRAY(
                                                                            JSON_OBJECT('question', 'What is 2+2?', 'options', JSON_ARRAY('3','4','5','6'), 'correct', '4'),
                                                                            JSON_OBJECT('question', 'Solve for x: x + 5 = 10.', 'options', JSON_ARRAY('3','5','10','15'), 'correct', '5')
                                                                    )
                                                                   ),
                                                                   ('Basic Science', 'A quiz covering basic science principles', 1, 2, 0,
                                                                    JSON_ARRAY(
                                                                            JSON_OBJECT('question', 'The earth is flat.', 'correct', false),
                                                                            JSON_OBJECT('question', 'Water boils at 100°C.', 'correct', true)
                                                                    )
                                                                   );

 -- 9.5. Quiz Tags
 INSERT INTO quiz_tag (quiz_id, tag_id) VALUES
                                              (1, 1), -- Algebra Basics tagged Mathematics
                                              (1, 2), -- Algebra Basics also tagged Science (example of multiple tags)
                                              (2, 2); -- Basic Science tagged Science
